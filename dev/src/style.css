@import "tailwindcss";

/* 100 Thin */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-100.woff2")
    format("woff2");
  font-weight: 100;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-100italic.woff2")
    format("woff2");
  font-weight: 100;
  font-style: italic;
  font-display: swap;
}

/* 200 ExtraLight */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-200.woff2")
    format("woff2");
  font-weight: 200;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-200italic.woff2")
    format("woff2");
  font-weight: 200;
  font-style: italic;
  font-display: swap;
}

/* 300 Light */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-300.woff2")
    format("woff2");
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-300italic.woff2")
    format("woff2");
  font-weight: 300;
  font-style: italic;
  font-display: swap;
}

/* 400 Regular */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-regular.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-italic.woff2")
    format("woff2");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

/* 500 Medium */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-500.woff2")
    format("woff2");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-500italic.woff2")
    format("woff2");
  font-weight: 500;
  font-style: italic;
  font-display: swap;
}

/* 600 SemiBold */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-600.woff2")
    format("woff2");
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-600italic.woff2")
    format("woff2");
  font-weight: 600;
  font-style: italic;
  font-display: swap;
}

/* 700 Bold */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-700.woff2")
    format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-700italic.woff2")
    format("woff2");
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* 800 ExtraBold */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-800.woff2")
    format("woff2");
  font-weight: 800;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-800italic.woff2")
    format("woff2");
  font-weight: 800;
  font-style: italic;
  font-display: swap;
}

/* 900 Black */
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-900.woff2")
    format("woff2");
  font-weight: 900;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Montserrat";
  src: url("https://jfltx.github.io/fonts/Montserrat/montserrat-v31-latin-900italic.woff2")
    format("woff2");
  font-weight: 900;
  font-style: italic;
  font-display: swap;
}

/* Global usage */
:root {
  --font: "Montserrat", system-ui, sans-serif;
  --h1-weight: 900;
  --dark: #111;
}

h1 {
  position: absolute;
  z-index: 650;
  top: 10px;
  left: 15px;
  padding: 0px 4px;
  margin: 0;
  font-family: var(--font);
  font-weight: var(--h1-weight);
  font-size: 3em;
  letter-spacing: 0.05em;
  color: whitesmoke;
  text-shadow: 0 0 2px var(--dark), 0 0 5px var(--dark), 0 0 7px var(--dark),
    0 0 10px var(--dark);
}

.legend {
  position: absolute;
  bottom: 45px;
  left: 10px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 6px;
  padding: 8px 12px;
  font-family: var(--font);
  font-size: 0.8em;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
  max-width: min(70vw, 320px);
  max-height: 45vh;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.legend_title {
  font-weight: 700;
  margin: 0 0 6px 0;
  font-size: 1em;
}
.legend_list {
}

.legend_item {
  display: flex;
  align-items: center;
  margin: 3px 0;
  break-inside: avoid; /* helps if we use CSS columns on mobile */
}

.legend_body svg {
  display: block;
}
.legend_body text {
  dominant-baseline: middle;
}

/* legend layout */
.legend_body {
  position: relative;
}

.legend_box {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}
/* legend layout shell */
.legend_body {
  position: relative;
}

.legend_box {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

/* concentric bubbles area */
.legend_bubbles {
  /* JS sets --maxD and --color */
  --maxD: 120px;
  --color: #888;
  position: relative;
  width: var(--maxD);
  height: var(--maxD);
}

/* each bubble: bottom-center anchored */
.legend_bubbles .b {
  position: absolute;
  bottom: 0; /* share the same baseline */
  left: 50%; /* share the same horizontal center */
  transform: translateX(-50%);
  border-radius: 50%;
  border: 1px solid #222;
  background: var(--color);
  opacity: 0.95;
}

/* labels + ticks to the right */
.legend_labels {
  position: relative;
  min-width: 160px;
}
.legend_labels .tick {
  position: absolute;
  left: 0;
  width: 24px; /* leader length */
  height: 1px;
  background: #22222246;
}
.legend_labels .lbl {
  position: absolute;
  left: 30px; /* label start (after leader) */
  font-size: 12px;
  line-height: 1;
  white-space: nowrap;
  transform: translateY(-50%); /* vertical centering on the tick line */
}

/* add styles globally to project */
body {
  font-family: var(--font);
}

.maplibregl-popup {
  max-width: 300px !important;
}

/* MapLibre GL JS Popup styles using root font */
.maplibregl-popup-content,
body {
  font-family: var(--font);
  font-size: 0.9rem;
  @apply text-gray-800;
}

/* Popup content container styles */
.maplibregl-popup-content {
  @apply rounded-lg shadow-lg;
}

/* --- Help modal/backdrop/button --- */
.maphelp_backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000; /* above h1 (650) & legend */
}

.maphelp_modal {
  background: #fff;
  color: #111;
  width: min(92vw, 520px);
  border-radius: 12px;
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
  padding: 18px 20px 14px;
  position: relative;
  font-family: var(--font, system-ui, sans-serif);
}

.maphelp_modal .title {
  margin: 0 0 10px;
  font-size: 1.15rem;
  font-weight: 800;
}

.maphelp_modal .list {
  margin: 0 0 12px 1rem;
  padding: 0;
  line-height: 1.4;
}
.maphelp_modal .list li {
  margin: 6px 0;
}

.maphelp_modal .actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

.maphelp_modal .ok {
  background: #111;
  color: #fff;
  border: 0;
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
}
.maphelp_modal .ok:hover {
  filter: brightness(1.1);
}

.maphelp_modal .remember {
  font-size: 0.9rem;
  color: #333;
  display: flex;
  align-items: center;
  gap: 6px;
}

.maphelp_close {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: #f3f3f3;
  border: 0;
  cursor: pointer;
  font-size: 18px;
  line-height: 1;
}
.maphelp_close:hover {
  background: #e8e8e8;
}

.maphelp_btn {
  position: absolute;
  top: 10px;
  right: 50px;
  z-index: 700;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 0;
  cursor: pointer;
  background: #ffffff;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.25);
  font-weight: 800;
  font-family: var(--font, system-ui, sans-serif);
}

.maphelp-ctrl {
  /* nothing special; inherits the white rounded group box */
}

.maphelp_btn_ctrl {
  width: 30px;
  height: 30px;
  line-height: 30px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 0;
  background: transparent; /* group provides bg */
  cursor: pointer;
  font-weight: 800;
  font-family: var(--font, system-ui, sans-serif);
  font-size: 16px;
  color: #111;
}

.maphelp_btn_ctrl:hover {
  background-color: rgba(0, 0, 0, 0.06);
}
.maphelp_btn_ctrl:active {
  background-color: rgba(0, 0, 0, 0.12);
}

.maphelp_btn:hover {
  background: #ffffffcc;
}

/* Small devices (portrait phones, 576px and below) */
@media (max-width: 576px) and (orientation: portrait) {
  h1 {
    display: none;
  }

  .legend {
    position: absolute;
    top: 10px;
    left: 10px;
    bottom: auto;
    right: auto;
    font-size: 0.7em;
    max-width: 86vw;
    max-height: 40vh;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .legend_list {
    column-count: 2;
    column-gap: 1px;
  }
  .legend_item {
    break-inside: avoid;
  }

  .maplibregl-popup {
    max-width: min(92vw, 290px) !important;
  }

  .maphelp_modal {
    width: min(94vw, 520px);
    padding: 16px 16px 12px;
  }
}

@media (max-width: 372px) {
  .legend_list {
    column-count: 1;
  }
  .maphelp_btn {
    bottom: 10px;
    right: 50px;
  }
}
